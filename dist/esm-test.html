<html>
	<head> </head>
	<body>
		<h1>stylelint</h1>
		<p>Edit code or config to see updated results</p>
		<label for="syntax">Select syntax:</label>
		<select name="syntax" id="syntax">
			<option value="css">css</option>
			<option value="./syntax-css-in-js.js">css-in-js</option>
			<option value="./syntax-html.js">html</option>
			<option value="./syntax-less.js">less</option>
			<option value="./syntax-markdown.js">markdown</option>
			<option value="./syntax-sass.js">sass</option>
			<option value="./syntax-scss.js">scss</option>
			<option value="./syntax-sugarss.js">sugarss</option>
		</select>
		<h2>code</h2>
		<textarea id="code" style="width: 100%; height: 200px;">
a {color: #FFF; }
		</textarea
		>
		<h2>config</h2>
		<textarea id="config" style="width: 100%; height: 200px;">
{
	"rules": {
		"color-hex-length": "long",
		"at-rule-no-vendor-prefix": true
	}
}
		</textarea
		>
		<h2>results</h2>
		<code id="results" style="white-space: pre;"></code>
		<script type="module">
			import stylelint from './stylelint-esm.js';

			async function main() {
				const syntaxEl = document.querySelector('#syntax');
				const codeEl = document.querySelector('#code');
				const configEl = document.querySelector('#config');
				const resultsEl = document.querySelector('#results');
				let selectedSyntax;

				syntaxEl.addEventListener('change', setSyntax);
				codeEl.addEventListener('keyup', lint);
				configEl.addEventListener('keyup', lint);

				function setSyntax(event) {
					selectedSyntax = event.target.value === 'css' ? null : event.target.value;
					lint();
				}

				async function lint() {
					try {
						const options = {
							code: codeEl.value,
							config: JSON.parse(`[${configEl.value}]`)[0],
						};

						if (selectedSyntax) options.customSyntax = selectedSyntax;

						const results = await stylelint(options);
						resultsEl.textContent = JSON.stringify(results, null, 4);
					} catch (error) {
						resultsEl.textContent = error;
					}
				}

				lint();
			}

			main();
		</script>
	</body>
</html>
